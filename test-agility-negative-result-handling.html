<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Gestion des R√©sultats N√©gatifs d'Agilit√©</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
        code { background: #f4f4f4; padding: 2px 4px; border-radius: 3px; }
        .section { margin: 20px 0; padding: 15px; border-left: 4px solid #007cba; background: #f8f9fa; }
        .example { background: #fff3cd; padding: 10px; border-radius: 5px; margin: 10px 0; }
        .warning { background: #f8d7da; padding: 10px; border-radius: 5px; margin: 10px 0; border-left: 4px solid #dc3545; }
    </style>
</head>
<body>
    <h1>üéØ Test - Gestion des R√©sultats N√©gatifs d'Agilit√©</h1>
    
    <div class="section">
        <h2>‚úÖ Fonctionnalit√© impl√©ment√©e</h2>
        <p>Lors d'un lancer de d√© d'Agilit√©, si le score final (apr√®s application du malus d'armure) devient n√©gatif, il est automatiquement ramen√© √† 1 au lieu de rester n√©gatif.</p>
    </div>

    <div class="section">
        <h2>üîç Principe de fonctionnement</h2>
        <p>Cette fonctionnalit√© s'applique <strong>uniquement</strong> aux jets d'Agilit√© et garantit qu'un personnage ne peut jamais obtenir un r√©sultat n√©gatif, m√™me avec une armure tr√®s lourde.</p>
        
        <div class="example">
            <h4>Exemple concret :</h4>
            <p><strong>Caract√©ristique Agilit√© :</strong> 2d4 (Challeng√©)</p>
            <p><strong>Armure :</strong> Blind√©e (-16 agilit√©)</p>
            <ul>
                <li><strong>Lancer des d√©s :</strong> 2d4 = 3</li>
                <li><strong>Bonus de trait :</strong> +0</li>
                <li><strong>Malus d'armure :</strong> -16</li>
                <li><strong>Calcul :</strong> 3 + 0 + (-16) = -13</li>
                <li><strong>R√©sultat final :</strong> 1 (ramen√© au minimum possible)</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2>‚ö†Ô∏è Important : Ce n'est PAS un √©chec critique</h2>
        <div class="warning">
            <p><strong>ATTENTION :</strong> Quand un r√©sultat d'Agilit√© est ramen√© √† 1, ce n'est <strong>PAS</strong> un √©chec critique !</p>
            <p>C'est simplement le minimum possible que peut obtenir le personnage avec cette armure.</p>
            <p>Les √©checs critiques ne s'appliquent qu'aux jets "Unsafe" quand le r√©sultat des d√©s est √©gal au minimum possible de la formule.</p>
        </div>
    </div>

    <div class="section">
        <h2>üõ†Ô∏è Modifications apport√©es</h2>
        
        <h3>1. M√©thode <code>_rollDice()</code></h3>
        <p><strong>Fichier :</strong> <code>scripts/heros-sheet.js</code></p>
        <p>Ajout de la logique de ramener √† 1 :</p>
        <code>
            // Pour les jets d'Agilit√©, si le r√©sultat final devient n√©gatif, le ramener √† 1<br>
            if (stat === 'agilite' && finalResult < 1) {<br>
            &nbsp;&nbsp;&nbsp;&nbsp;console.log(`Jet d'Agilit√©: r√©sultat final ${finalResult} ramen√© √† 1 (minimum possible)`);<br>
            &nbsp;&nbsp;&nbsp;&nbsp;finalResult = 1;<br>
            }
        </code>

        <h3>2. Affichage dans le chat</h3>
        <p>Ajout d'un message informatif quand le r√©sultat est ramen√© √† 1 :</p>
        <code>
            ${stat === 'agilite' && (baseResult + traitBonus + rollData.agilityPenalty) < 1 ?<br>
            &nbsp;&nbsp;&nbsp;&nbsp;`<p><strong>Note:</strong> <span class="roll-note">R√©sultat ramen√© √† 1 (minimum possible)</span></p>` : ''}
        </code>

        <h3>3. Style CSS</h3>
        <p><strong>Fichier :</strong> <code>styles/heros-sheet.css</code></p>
        <p>Ajout du style pour <code>.roll-note</code> :</p>
        <code>
            .roll-note {<br>
            &nbsp;&nbsp;&nbsp;&nbsp;font-size: 14px;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;font-weight: bold;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;color: #ffc107;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;background: rgba(255, 193, 7, 0.1);<br>
            &nbsp;&nbsp;&nbsp;&nbsp;padding: 4px 8px;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;border-radius: 4px;<br>
            &nbsp;&nbsp;&nbsp;&nbsp;border: 1px solid #ffc107;<br>
            }
        </code>
    </div>

    <div class="section">
        <h2>üßÆ Sc√©narios de test</h2>
        
        <h3>Sc√©nario 1 : Armure l√©g√®re (-4)</h3>
        <p><strong>Agilit√© :</strong> 2d4 (Challeng√©)</p>
        <ul>
            <li><strong>Lancer :</strong> 2d4 = 2 (minimum possible)</li>
            <li><strong>R√©sultat :</strong> 2 + (-4) = -2 ‚Üí ramen√© √† 1</li>
            <li><strong>Affichage :</strong> Message "R√©sultat ramen√© √† 1 (minimum possible)"</li>
        </ul>

        <h3>Sc√©nario 2 : Armure lourde (-8)</h3>
        <p><strong>Agilit√© :</strong> 3d4 (Lourdeau)</p>
        <ul>
            <li><strong>Lancer :</strong> 3d4 = 4</li>
            <li><strong>R√©sultat :</strong> 4 + (-8) = -4 ‚Üí ramen√© √† 1</li>
            <li><strong>Affichage :</strong> Message "R√©sultat ramen√© √† 1 (minimum possible)"</li>
        </ul>

        <h3>Sc√©nario 3 : Armure blind√©e (-16)</h3>
        <p><strong>Agilit√© :</strong> 4d4 (Bien)</p>
        <ul>
            <li><strong>Lancer :</strong> 4d4 = 5</li>
            <li><strong>R√©sultat :</strong> 5 + (-16) = -11 ‚Üí ramen√© √† 1</li>
            <li><strong>Affichage :</strong> Message "R√©sultat ramen√© √† 1 (minimum possible)"</li>
        </ul>

        <h3>Sc√©nario 4 : Pas de malus</h3>
        <p><strong>Agilit√© :</strong> 2d4 (Challeng√©)</p>
        <ul>
            <li><strong>Lancer :</strong> 2d4 = 3</li>
            <li><strong>R√©sultat :</strong> 3 + 0 = 3 (normal)</li>
            <li><strong>Affichage :</strong> Aucun message sp√©cial</li>
        </ul>
    </div>

    <div class="section">
        <h2>üß™ Tests √† effectuer</h2>
        <ol>
            <li><strong>Jet d'Agilit√© avec armure l√©g√®re :</strong> V√©rifier que les r√©sultats n√©gatifs sont ramen√©s √† 1</li>
            <li><strong>Jet d'Agilit√© avec armure lourde :</strong> V√©rifier que les r√©sultats n√©gatifs sont ramen√©s √† 1</li>
            <li><strong>Jet d'Agilit√© avec armure blind√©e :</strong> V√©rifier que les r√©sultats n√©gatifs sont ramen√©s √† 1</li>
            <li><strong>Message informatif :</strong> V√©rifier l'affichage du message "R√©sultat ramen√© √† 1 (minimum possible)"</li>
            <li><strong>Autres caract√©ristiques :</strong> V√©rifier que cette logique ne s'applique qu'√† l'Agilit√©</li>
            <li><strong>Pas de malus :</strong> V√©rifier qu'aucun message sp√©cial n'appara√Æt sans malus</li>
        </ol>
    </div>

    <div class="section">
        <h2>üìÅ Fichiers modifi√©s</h2>
        <ul>
            <li><strong><code>scripts/heros-sheet.js</code></strong> : 
                <ul>
                    <li>Modification de <code>_rollDice()</code> pour ramener √† 1</li>
                    <li>Modification de <code>_displayRollResult()</code> pour afficher le message informatif</li>
                </ul>
            </li>
            <li><strong><code>styles/heros-sheet.css</code></strong> : Ajout du style <code>.roll-note</code></li>
        </ul>
    </div>

    <div class="section">
        <h2>üéâ R√©sultat attendu</h2>
        <p>Les jets d'Agilit√© ne peuvent plus donner de r√©sultats n√©gatifs. Si le malus d'armure rend le r√©sultat n√©gatif, il est automatiquement ramen√© √† 1 avec un message informatif clair. Cette fonctionnalit√© ne s'applique qu'√† l'Agilit√© et n'interf√®re pas avec le syst√®me d'√©checs critiques.</p>
    </div>

    <script>
        console.log("Test de gestion des r√©sultats n√©gatifs d'Agilit√© - VoidHorizon");
    </script>
</body>
</html>
