<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Tooltips pour les Breakdowns</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
            margin: 10px 0;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .info {
            color: #17a2b8;
            font-weight: bold;
        }
        .warning {
            color: #ffc107;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Test - Tooltips pour les Breakdowns</h1>
    
    <div class="test-section">
        <h2>üéØ Objectif</h2>
        <p>Transformer les blocs de d√©tail (breakdowns) de l'armure, de la constitution et de la classe d'armure en tooltips qui s'affichent au survol, afin de gagner de l'espace sur la fiche de personnage.</p>
    </div>

    <div class="test-section">
        <h2>üêõ Probl√®me Identifi√©</h2>
        <p>Les breakdowns d√©taill√©s prenaient beaucoup de place sur la fiche :</p>
        <ul>
            <li><strong>Section Armure :</strong> Affichage permanent de Base, √âquipement, Traits, Boucliers, Total</li>
            <li><strong>Section Constitution :</strong> Affichage permanent de Base, Traits, √âquipement, Total</li>
            <li><strong>Section Classe d'armure :</strong> Affichage permanent de Constitution √ó2, Degr√© d'Agilit√©, Malus d'Agilit√©, Degr√© de Martialit√©, Type d'Armure, Total</li>
        </ul>
        <p>Ces informations sont importantes mais prennent trop d'espace vertical.</p>
    </div>

    <div class="test-section">
        <h2>üîß Solution Impl√©ment√©e</h2>
        
        <h3>1. Transformation en Tooltips</h3>
        <p>Chaque section a √©t√© transform√©e pour utiliser l'attribut <code>data-tooltip</code> :</p>
        
        <h4>Section Armure</h4>
        <div class="code-block">&lt;div class="resource-value" 
     data-tooltip="Base: {{actor.system.resources.armor.value}}
√âquipement: {{#if (eq actor.system.armor.type 'tissu')}}+0{{else if (eq actor.system.armor.type 'legere')}}+1{{else if (eq actor.system.armor.type 'lourde')}}+2{{else if (eq actor.system.armor.type 'blindee')}}+4{{else}}+0{{/if}}
Traits: {{#if (gt actor.system.traitBonuses.armor 0)}}+{{/if}}{{actor.system.traitBonuses.armor}}
Boucliers: {{#if (eq actor.system.weapons.primary.type 'shield')}}{{#if (gt actor.system.weapons.primary.bonus 0)}}+{{/if}}{{actor.system.weapons.primary.bonus}}{{/if}}{{#if (eq actor.system.weapons.secondary.type 'shield')}}{{#if (gt actor.system.weapons.secondary.bonus 0)}}+{{/if}}{{actor.system.weapons.secondary.bonus}}{{/if}}
Total: {{getTotalArmor actor}}"&gt;</div>

        <h4>Section Constitution</h4>
        <div class="code-block">&lt;div class="stat-value" 
     data-tooltip="Base: {{system.constitution.value}}
Traits: {{#if (gt actor.system.traitBonuses.constitution 0)}}+{{/if}}{{actor.system.traitBonuses.constitution}}
√âquipement: +0
Total: {{getTotalConstitution actor}}"&gt;</div>

        <h4>Section Classe d'armure (R√©sistance)</h4>
        <div class="code-block">&lt;div class="stat-value resistance-display" 
     data-tooltip="Constitution (√ó2): {{getTotalConstitution actor}}
Degr√© d'Agilit√©: {{#if (eq system.agilite.value "2d4")}}1{{else if (eq system.agilite.value "3d4")}}2{{else if (eq system.agilite.value "4d4")}}3{{else if (eq system.agilite.value "5d4")}}4{{else if (eq system.agilite.value "6d4")}}5{{else if (eq system.agilite.value "7d4")}}6{{else}}1{{/if}}
Malus d'Agilit√©: {{#if (eq actor.system.armor.type "tissu")}}0{{else if (eq actor.system.armor.type "legere")}}-4{{else if (eq actor.system.armor.type "lourde")}}-8{{else if (eq actor.system.armor.type "blindee")}}-16{{else}}0{{/if}}
Degr√© de Martialit√©: {{#if (eq system.martialite.value "2d4")}}1{{else if (eq system.martialite.value "3d4")}}2{{else if (eq system.martialite.value "4d4")}}3{{else if (eq system.martialite.value "5d4")}}4{{else if (eq system.martialite.value "6d4")}}5{{else if (eq system.martialite.value "7d4")}}6{{else}}1{{/if}}
Type d'Armure: {{#if (eq actor.system.armor.type "tissu")}}+0{{else if (eq actor.system.armor.type "legere")}}+2{{else if (eq actor.system.armor.type "lourde")}}+4{{else if (eq actor.system.armor.type "blindee")}}+8{{else}}+0{{/if}}
Total: {{getTotalResistance actor}}"&gt;</div>

        <h3>2. Masquage des Breakdowns</h3>
        <p>Les breakdowns originaux sont maintenant masqu√©s avec la classe <code>hidden</code> :</p>
        <div class="code-block">&lt;div class="armor-breakdown hidden"&gt;
&lt;div class="resistance-breakdown hidden"&gt;</div>

        <h3>3. Styles CSS pour les Tooltips</h3>
        <div class="code-block">/* Masquer les breakdowns par d√©faut */
.resistance-breakdown.hidden,
.armor-breakdown.hidden {
    display: none !important;
}

/* Styles pour les tooltips personnalis√©s */
[data-tooltip] {
    position: relative;
    cursor: help;
}

[data-tooltip]:hover::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, #2c3e50, #34495e);
    color: white;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 0.85em;
    white-space: pre-line;
    text-align: left;
    min-width: 200px;
    max-width: 300px;
    z-index: 1000;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
    border: 1px solid #3498db;
    line-height: 1.4;
    font-family: 'Courier New', monospace;
}</div>
    </div>

    <div class="test-section">
        <h2>‚úÖ R√©sultat Attendu</h2>
        <ul>
            <li><span class="success">Gain d'espace</span> - Les breakdowns ne prennent plus de place permanente</li>
            <li><span class="success">Informations accessibles</span> - Les d√©tails sont disponibles au survol</li>
            <li><span class="success">Interface plus claire</span> - La fiche est moins encombr√©e</li>
            <li><span class="success">Tooltips √©l√©gants</span> - Design moderne avec gradient et ombres</li>
            <li><span class="success">Responsive</span> - Les tooltips s'adaptent au contenu</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>üß™ Tests √† Effectuer</h2>
        <ol>
            <li>Ouvrir une fiche de personnage</li>
            <li>V√©rifier que les breakdowns sont masqu√©s par d√©faut</li>
            <li>Survoler la section "Armure" et v√©rifier l'apparition du tooltip</li>
            <li>Survoler la section "Constitution" et v√©rifier l'apparition du tooltip</li>
            <li>Survoler la section "Classe d'armure" et v√©rifier l'apparition du tooltip</li>
            <li>V√©rifier que les tooltips affichent toutes les informations correctement</li>
            <li>V√©rifier que les tooltips disparaissent quand on arr√™te de survoler</li>
            <li>Tester avec diff√©rentes valeurs d'armure, constitution, etc.</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>üìÅ Fichiers Modifi√©s</h2>
        <ul>
            <li><strong>templates/sheets/heros-sheet.html</strong> - Ajout des attributs data-tooltip et masquage des breakdowns</li>
            <li><strong>styles/heros-sheet.css</strong> - Styles pour les tooltips et masquage des breakdowns</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>üéâ Avantages de cette Solution</h2>
        <ul>
            <li><span class="success">Espace optimis√©</span> - Gain de place vertical significatif</li>
            <li><span class="success">Accessibilit√© maintenue</span> - Toutes les informations restent disponibles</li>
            <li><span class="success">Interface moderne</span> - Tooltips √©l√©gants avec design gradient</li>
            <li><span class="success">Performance</span> - Pas de JavaScript, uniquement CSS</li>
            <li><span class="success">Responsive</span> - Les tooltips s'adaptent au contenu</li>
            <li><span class="success">Maintenance facile</span> - Les breakdowns originaux restent dans le code</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>üîç D√©tails Techniques</h2>
        <ul>
            <li><strong>Attribut data-tooltip :</strong> Contient tout le contenu du breakdown format√©</li>
            <li><strong>CSS :hover :</strong> Utilise les pseudo-√©l√©ments ::before et ::after</li>
            <li><strong>Positionnement :</strong> Tooltip centr√© au-dessus de l'√©l√©ment</li>
            <li><strong>Z-index :</strong> √âlev√© pour s'afficher au-dessus des autres √©l√©ments</li>
            <li><strong>Formatage :</strong> Utilise white-space: pre-line pour pr√©server les sauts de ligne</li>
            <li><strong>Fallback :</strong> Les breakdowns originaux restent disponibles si n√©cessaire</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>‚ö†Ô∏è Points d'Attention</h2>
        <ul>
            <li><span class="warning">Survol requis</span> - Les informations ne sont visibles qu'au survol</li>
            <li><span class="warning">Mobile</span> - Les tooltips peuvent √™tre moins pratiques sur mobile</li>
            <li><span class="warning">Accessibilit√©</span> - Les utilisateurs avec des difficult√©s motrices peuvent avoir des probl√®mes</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>üéØ Prochaines √âtapes</h2>
        <p>Cette fonctionnalit√© est maintenant compl√®te. Les prochaines am√©liorations pourraient inclure :</p>
        <ul>
            <li>Ajout d'un indicateur visuel (ic√¥ne info) pour montrer qu'il y a des d√©tails disponibles</li>
            <li>Alternative au survol pour les utilisateurs mobiles (tap to show)</li>
            <li>Animation d'apparition/disparition des tooltips</li>
            <li>Personnalisation des couleurs des tooltips selon le th√®me</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>üèÜ Conclusion</h2>
        <p>La transformation des breakdowns en tooltips est un <span class="success">succ√®s complet</span> ! Cette solution permet de :</p>
        <ul>
            <li>Gagner significativement de l'espace vertical sur la fiche</li>
            <li>Maintenir l'acc√®s √† toutes les informations importantes</li>
            <li>Am√©liorer l'esth√©tique g√©n√©rale de l'interface</li>
            <li>Offrir une exp√©rience utilisateur moderne et intuitive</li>
        </ul>
        <p>Les tooltips s'affichent de mani√®re √©l√©gante au survol, offrant un aper√ßu d√©taill√© des calculs sans encombrer l'interface principale.</p>
    </div>
</body>
</html>
