import ServerDocumentMixin from"../backend/server-document.mjs";import BaseActorDelta from"../../../common/documents/actor-delta.mjs";import*as fields from"../../../common/data/fields.mjs";export default class ActorDelta extends(ServerDocumentMixin(BaseActorDelta)){static isDelta=!0;static getSystemFields(e){return game.template.Actor?.[e]}async loadRelatedDocuments(){return this.parent.loadRelatedDocuments()}async _preUpdate(e,t,o){if(t.restoreDelta){for(const t of Object.keys(e))delete e[t];for(const t of this.schema)t instanceof fields.DocumentIdField||(t instanceof fields.EmbeddedCollectionField?e[t.name]=[]:e[t.name]=t.initial);this.updateSource(e,t),e._id=this.id}return super._preUpdate(e,t,o)}_onDelete(e,t){super._onDelete(e,t),delete this.parent.delta}}