import BaseToken from"../../../common/documents/token.mjs";import ServerDocumentMixin from"../backend/server-document.mjs";export default class Token extends(ServerDocumentMixin(BaseToken)){async loadRelatedDocuments(){this.baseActor=await db.Actor.get(this.actorId),this.delta||(this.updateSource({delta:new db.ActorDelta({_id:this.id},{parent:this}).toObject()}),await this.save());for(const t of Object.values(this.delta.collections))t.initialize({full:!0});this.actorLink?this.actor=this.baseActor:this.actor=this.delta?.constructor.applyDelta(this.delta,this.baseActor)}}