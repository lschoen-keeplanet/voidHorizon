<form class="voidHorizon-sheet heros-sheet" autocomplete="off">
    <header class="sheet-header">
        <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}"/>
        <div class="header-fields">
            <h1 class="charname"><input name="name" type="text" value="{{actor.name}}" placeholder="Nom"/></h1>
            <div class="class-line">
                <label>Classe:</label>
                <select name="system.class.value">
                    <option value="panzer" {{selected "panzer" system.class.value}}>Panzer</option>
                    <option value="tirailleur" {{selected "tirailleur" system.class.value}}>Tirailleur</option>
                    <option value="soigneur" {{selected "soigneur" system.class.value}}>Soigneur</option>
                    <option value="mage" {{selected "mage" system.class.value}}>Mage</option>
                </select>
            </div>
            <div class="main-stats">
                <div class="stat">
                    <label>Agilité</label>
                    <div class="stat-controls">
                        <select name="system.agilite.value">
                            <option value="1d4" {{selected "1d4" system.agilite.value}}>1d4</option>
                            <option value="1d6" {{selected "1d6" system.agilite.value}}>1d6</option>
                            <option value="1d8" {{selected "1d8" system.agilite.value}}>1d8</option>
                            <option value="1d10" {{selected "1d10" system.agilite.value}}>1d10</option>
                            <option value="1d12" {{selected "1d12" system.agilite.value}}>1d12</option>
                            <option value="1d20" {{selected "1d20" system.agilite.value}}>1d20</option>
                        </select>
                        <button type="button" class="roll-stat" data-stat="agilite"><i class="fas fa-dice-d20"></i></button>
                    </div>
                </div>
                <div class="stat">
                    <label>Pimpance</label>
                    <div class="stat-controls">
                        <select name="system.pimpance.value">
                            <option value="1d4" {{selected "1d4" system.pimpance.value}}>Tâche</option>
                            <option value="1d6" {{selected "1d6" system.pimpance.value}}>Pas top</option>
                            <option value="1d8" {{selected "1d8" system.pimpance.value}}>Honnête</option>
                            <option value="1d10" {{selected "1d10" system.pimpance.value}}>Clinquant</option>
                            <option value="1d12" {{selected "1d12" system.pimpance.value}}>Majestueux</option>
                            <option value="1d20" {{selected "1d20" system.pimpance.value}}>Ramirez</option>
                        </select>
                        <button type="button" class="roll-stat" data-stat="pimpance"><i class="fas fa-dice-d20"></i></button>
                    </div>
                </div>
                <div class="stat">
                    <label>Moral</label>
                    <div class="stat-controls">
                        <select name="system.moral.value">
                            <option value="1d4" {{selected "1d4" system.moral.value}}>1d4</option>
                            <option value="1d6" {{selected "1d6" system.moral.value}}>1d6</option>
                            <option value="1d8" {{selected "1d8" system.moral.value}}>1d8</option>
                            <option value="1d10" {{selected "1d10" system.moral.value}}>1d10</option>
                            <option value="1d12" {{selected "1d12" system.moral.value}}>1d12</option>
                            <option value="1d20" {{selected "1d20" system.moral.value}}>1d20</option>
                        </select>
                        <button type="button" class="roll-stat" data-stat="moral"><i class="fas fa-dice-d20"></i></button>
                    </div>
                </div>
                <div class="stat">
                    <label>Martialité</label>
                    <div class="stat-controls">
                        <select name="system.martialite.value">
                            <option value="1d4" {{selected "1d4" system.martialite.value}}>1d4</option>
                            <option value="1d6" {{selected "1d6" system.martialite.value}}>1d6</option>
                            <option value="1d8" {{selected "1d8" system.martialite.value}}>1d8</option>
                            <option value="1d10" {{selected "1d10" system.martialite.value}}>1d10</option>
                            <option value="1d12" {{selected "1d12" system.martialite.value}}>1d12</option>
                            <option value="1d20" {{selected "1d20" system.martialite.value}}>1d20</option>
                        </select>
                        <button type="button" class="roll-stat" data-stat="martialite"><i class="fas fa-dice-d20"></i></button>
                    </div>
                </div>
                <div class="stat">
                    <label>Arcane</label>
                    <div class="stat-controls">
                        <select name="system.arcane.value">
                            <option value="1d4" {{selected "1d4" system.arcane.value}}>1d4</option>
                            <option value="1d6" {{selected "1d6" system.arcane.value}}>1d6</option>
                            <option value="1d8" {{selected "1d8" system.arcane.value}}>1d8</option>
                            <option value="1d10" {{selected "1d10" system.arcane.value}}>1d10</option>
                            <option value="1d12" {{selected "1d12" system.arcane.value}}>1d12</option>
                            <option value="1d20" {{selected "1d20" system.arcane.value}}>1d20</option>
                        </select>
                        <button type="button" class="roll-stat" data-stat="arcane"><i class="fas fa-dice-d20"></i></button>
                    </div>
                </div>
                <div class="stat">
                    <label>Constitution</label>
                    <div class="stat-controls">
                        <input type="number" name="system.constitution.value" value="{{system.constitution.value}}" min="1" max="10"/>
                    </div>
                </div>
                <div class="stat constitution-hearts">
                    <label>Points de Vie</label>
                    <div class="armor-container">
                        {{#each (times system.resources.armor.value)}}
                        <div class="heart-wrapper">
                            <button type="button" class="heart-button alive" data-heart-index="{{this}}" data-alive="true">
                                <i class="fas fa-heart" style="color: #333;"></i>
                            </button>
                            <button type="button" class="heart-button dead" data-heart-index="{{this}}" data-alive="false">
                                <i class="fas fa-heart-broken" style="color: #333;"></i>
                            </button>
                        </div>
                        {{/each}}
                    </div>
                    <div class="hearts-container">
                        {{#each (times system.constitution.value)}}
                        <div class="heart-wrapper">
                            <button type="button" class="heart-button alive" data-heart-index="{{this}}" data-alive="true">
                                <i class="fas fa-heart"></i>
                            </button>
                            <button type="button" class="heart-button dead" data-heart-index="{{this}}" data-alive="false">
                                <i class="fas fa-heart-broken"></i>
                            </button>
                        </div>
                        {{/each}}
                    </div>
                    <div class="health-status">
                        <span class="status-label">État :</span>
                        <span class="status-value" data-health-status>
                            {{#if (gte (sub system.constitution.value system.resources.blessure.value) 3)}}
                            Bonne santé
                            {{else if (eq (sub system.constitution.value system.resources.blessure.value) 2)}}
                            Légèrement blessé
                            {{else if (eq (sub system.constitution.value system.resources.blessure.value) 1)}}
                            Grièvement blessé
                            {{else}}
                            Incapacité
                            {{/if}}
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <nav class="sheet-tabs tabs" data-group="primary">
        <a class="item" data-tab="stats">Statistiques</a>
        <a class="item" data-tab="inventory">Inventaire</a>
        <a class="item" data-tab="biography">Biographie</a>
    </nav>

    <section class="sheet-body">
        <!-- Stats Tab -->
        <div class="tab stats" data-group="primary" data-tab="stats">
            <div class="stats-grid">
                <!-- Ressources -->
                <div class="resource">
                    <label>Armure</label>
                    <div class="resource-value">
                        <input type="number" name="system.resources.armor.value" value="{{actor.system.resources.armor.value}}" min="0"/>
                    </div>
                </div>
            </div>
        </div>

        <!-- Inventory Tab -->
        <div class="tab inventory" data-group="primary" data-tab="inventory">
            <div class="inventory-header">
                <h2>Inventaire</h2>
                <button type="button" class="create-item"><i class="fas fa-plus"></i> Ajouter un item</button>
            </div>
            
            <div class="inventory-list">
                {{#each actor.items as |item id|}}
                <div class="item" data-item-id="{{item._id}}">
                    <div class="item-header">
                        <div class="item-name">
                            <h3>{{item.name}}</h3>
                        </div>
                        <div class="item-controls">
                            <a class="item-control item-edit" title="Modifier"><i class="fas fa-edit"></i></a>
                            <a class="item-control item-delete" title="Supprimer"><i class="fas fa-trash"></i></a>
                        </div>
                    </div>
                    <div class="item-description">
                        {{item.system.description}}
                    </div>
                </div>
                {{/each}}
            </div>
        </div>

        <!-- Biography Tab -->
        <div class="tab biography" data-group="primary" data-tab="biography">
            <div class="biography-content">
                <textarea name="system.background.biography">{{system.background.biography}}</textarea>
            </div>
        </div>
    </section>
</form> 