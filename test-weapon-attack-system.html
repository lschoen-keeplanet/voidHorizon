<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - SystÃ¨me d'Attaque d'Armes avec Modes Safe/Unsafe</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .success { color: #4CAF50; font-weight: bold; }
        .warning { color: #FF9800; font-weight: bold; }
        .error { color: #F44336; font-weight: bold; }
        .info { color: #2196F3; font-weight: bold; }
        code {
            background: #f5f5f5;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: monospace;
        }
        .feature {
            background: #f9f9f9;
            border-left: 4px solid #4CAF50;
            padding: 15px;
            margin: 15px 0;
        }
        .critical {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ¯ Test - SystÃ¨me d'Attaque d'Armes avec Modes Safe/Unsafe</h1>
    
    <div class="feature">
        <h2>âœ… FonctionnalitÃ©s ImplÃ©mentÃ©es</h2>
        <ul>
            <li><strong>Deux modes d'attaque :</strong> Safe et Unsafe</li>
            <li><strong>Formule d'attaque :</strong> jet de compÃ©tence + jet de qualitÃ© + bonus</li>
            <li><strong>DÃ©tection des coups critiques :</strong> SuccÃ¨s et Ã©checs critiques pour le mode Unsafe</li>
            <li><strong>Interface utilisateur :</strong> Boutons distincts avec couleurs diffÃ©rentes</li>
            <li><strong>Gestion des boucliers :</strong> Boutons automatiquement cachÃ©s</li>
        </ul>
    </div>

    <div class="feature">
        <h2>ğŸ² Formules d'Attaque</h2>
        <h3>Mode Safe :</h3>
        <p><code>jet de compÃ©tence (safe) + bonus traits + malus agilitÃ© + jet de qualitÃ© + bonus arme</code></p>
        
        <h3>Mode Unsafe :</h3>
        <p><code>jet de compÃ©tence (unsafe) + bonus traits + malus agilitÃ© + jet de qualitÃ© + bonus arme</code></p>
        
        <p><strong>Note :</strong> Le mode Unsafe transforme automatiquement les dÃ©s de caractÃ©ristique selon la rÃ¨gle standard : 4d4 devient 1d20, 3d4 devient 1d16, etc. Les coups critiques se basent sur ces dÃ©s transformÃ©s.</p>
        <p><strong>Important :</strong> Les bonus de traits et malus d'agilitÃ© (armure) sont maintenant automatiquement appliquÃ©s aux jets d'attaque d'armes !</p>
    </div>

    <div class="critical">
        <h2>â­ SystÃ¨me de Coups Critiques (Mode Unsafe uniquement)</h2>
        <h3>RÃ©ussite Critique :</h3>
        <p>Quand le rÃ©sultat des dÃ©s de caractÃ©ristique <strong>transformed</strong> est Ã©gal au <strong>maximum possible</strong> de la formule unsafe.</p>
        <p><strong>Exemple :</strong> Pour 4d4 â†’ 1d20 (max 20), si le rÃ©sultat des 1d20 est 20 â†’ â­ RÃ‰USSITE CRITIQUE!</p>
        
        <h3>Ã‰chec Critique :</h3>
        <p>Quand le rÃ©sultat des dÃ©s de caractÃ©ristique <strong>transformed</strong> est Ã©gal au <strong>minimum possible</strong> de la formule unsafe.</p>
        <p><strong>Exemple :</strong> Pour 4d4 â†’ 1d20 (min 1), si le rÃ©sultat des 1d20 est 1 â†’ ğŸ’¥ Ã‰CHEC CRITIQUE!</p>
        
        <p><strong>Important :</strong> Les coups critiques se basent sur les dÃ©s de caractÃ©ristique transformÃ©s (unsafe), pas sur les dÃ©s de base ou les dÃ©s de qualitÃ©.</p>
    </div>

    <div class="feature">
        <h2>ğŸ”§ Types d'Armes et CaractÃ©ristiques</h2>
        <ul>
            <li><strong>Force (strength) â†’</strong> MartialitÃ©</li>
            <li><strong>AgilitÃ© (agility) â†’</strong> AgilitÃ©</li>
            <li><strong>AcuitÃ© (acuite) â†’</strong> AcuitÃ©</li>
            <li><strong>Bouclier (shield) â†’</strong> Pas de bouton d'attaque</li>
        </ul>
    </div>

    <div class="feature">
        <h2>ğŸ”„ Transformation des DÃ©s (Mode Unsafe)</h2>
        <p>En mode Unsafe, les dÃ©s de caractÃ©ristique sont automatiquement transformÃ©s :</p>
        <ul>
            <li><strong>2d4 â†’ 1d12</strong> (DegrÃ© 1)</li>
            <li><strong>3d4 â†’ 1d16</strong> (DegrÃ© 2)</li>
            <li><strong>4d4 â†’ 1d20</strong> (DegrÃ© 3)</li>
            <li><strong>5d4 â†’ 1d24</strong> (DegrÃ© 4)</li>
            <li><strong>6d4 â†’ 1d28</strong> (DegrÃ© 5)</li>
            <li><strong>7d4 â†’ 1d32</strong> (DegrÃ© 6)</li>
        </ul>
        <p><strong>Note :</strong> Cette transformation suit la mÃªme rÃ¨gle que les jets de caractÃ©ristique unsafe.</p>
    </div>

    <div class="feature">
        <h2>ğŸ¯ Bonus et Malus IntÃ©grÃ©s</h2>
        <p>Les jets d'attaque d'armes prennent maintenant automatiquement en compte :</p>
        <ul>
            <li><strong>Bonus de traits :</strong> AppliquÃ©s Ã  la caractÃ©ristique correspondante</li>
            <li><strong>Malus d'agilitÃ© :</strong> DÃ» au type d'armure Ã©quipÃ©e</li>
            <li><strong>Bonus d'arme :</strong> Bonus intrinsÃ¨que de l'Ã©quipement</li>
        </ul>
        <p><strong>Exemple :</strong> Une arme de type "AgilitÃ©" avec un personnage ayant +2 bonus trait et -1 malus d'armure lourde appliquera automatiquement ces modificateurs.</p>
    </div>

    <div class="feature">
        <h2>âš”ï¸ QualitÃ© des Armes</h2>
        <ul>
            <li><strong>Rang 0 :</strong> Ã‰quipement brisÃ© â†’ 1d4</li>
            <li><strong>Rang 1 :</strong> Ã‰quipement commun â†’ 1d6</li>
            <li><strong>Rang 2 :</strong> Ã‰quipement de qualitÃ© â†’ 1d8</li>
            <li><strong>Rang 3 :</strong> Ã‰quipement rare â†’ 1d10</li>
            <li><strong>Rang 4 :</strong> Ã‰quipement exceptionnel â†’ 1d12</li>
            <li><strong>Rang 5 :</strong> Ã‰quipement lÃ©gendaire â†’ 1d20</li>
        </ul>
    </div>

    <div class="feature">
        <h2>ğŸ¨ Interface Utilisateur</h2>
        <h3>Boutons d'Attaque :</h3>
        <ul>
            <li><strong>Bouton Safe :</strong> ğŸŸ¢ Vert avec icÃ´ne bouclier</li>
            <li><strong>Bouton Unsafe :</strong> ğŸ”´ Rouge avec icÃ´ne Ã©pÃ©e</li>
            <li><strong>Disposition :</strong> CÃ´te Ã  cÃ´te avec espacement Ã©gal</li>
            <li><strong>Masquage automatique :</strong> Pour les boucliers</li>
        </ul>
    </div>

    <div class="feature">
        <h2>ğŸ“ Messages de Chat</h2>
        <p>Chaque attaque gÃ©nÃ¨re un message dÃ©taillÃ© dans le chat contenant :</p>
        <ul>
            <li>ğŸ¯ Titre de l'attaque avec nom de l'arme</li>
            <li>â­/ğŸ’¥ Message de coup critique (si applicable)</li>
            <li>Mode d'attaque (Safe/Unsafe)</li>
            <li>CaractÃ©ristique et dÃ©s utilisÃ©s</li>
            <li><strong>DÃ©tail du jet de caractÃ©ristique :</strong> RÃ©sultat de base + bonus traits + malus agilitÃ©</li>
            <li>RÃ©sultat du jet de qualitÃ©</li>
            <li>Bonus de l'arme (si > 0)</li>
            <li><strong>RÃ©sultat total dÃ©taillÃ©</strong> avec tous les composants</li>
        </ul>
    </div>

    <div class="feature">
        <h2>ğŸ§ª Exemple d'Utilisation</h2>
        <p><strong>ScÃ©nario :</strong> Arme de type "Force" avec MartialitÃ© 4d4, QualitÃ© 1d8, Bonus +2</p>
        
        <h3>Mode Safe :</h3>
        <p><code>Formule : 4d4 + bonus traits + malus agilitÃ© + 1d8 + 2</code></p>
        <p>Pas de coups critiques possibles</p>
        
        <h3>Mode Unsafe :</h3>
        <p><code>Formule : 1d20 + bonus traits + malus agilitÃ© + 1d8 + 2</code> (4d4 transformÃ© en 1d20)</p>
        <p><strong>RÃ©ussite critique :</strong> Si les 1d20 donnent 20 (maximum)</p>
        <p><strong>Ã‰chec critique :</strong> Si les 1d20 donnent 1 (minimum)</p>
        <p><strong>Exemple concret :</strong> Si MartialitÃ© 4d4 avec +3 bonus trait et -1 malus agilitÃ© :</p>
        <p>Safe : 4d4 + 3 - 1 + 1d8 + 2</p>
        <p>Unsafe : 1d20 + 3 - 1 + 1d8 + 2</p>
    </div>

    <div class="success">
        <h2>ğŸ‰ SystÃ¨me Complet !</h2>
        <p>Le systÃ¨me d'attaque d'armes est maintenant <strong>PARFAITEMENT</strong> fonctionnel avec :</p>
        <ul>
            <li>âœ… Modes Safe et Unsafe avec transformation des dÃ©s</li>
            <li>âœ… DÃ©tection des coups critiques basÃ©e sur les dÃ©s transformÃ©s</li>
            <li>âœ… <strong>INTÃ‰GRATION COMPLÃˆTE des bonus de traits et malus d'agilitÃ©</strong></li>
            <li>âœ… Interface utilisateur intuitive</li>
            <li>âœ… Gestion des boucliers</li>
            <li>âœ… Messages de chat ultra-dÃ©taillÃ©s avec dÃ©composition complÃ¨te</li>
            <li>âœ… Formules d'attaque parfaitement cohÃ©rentes avec le systÃ¨me de jeu</li>
        </ul>
        <p><strong>ğŸ‰ LE COOKIE EST MÃ‰RITÃ‰ ! ğŸª</strong></p>
        <p><strong>ğŸ¯ TOUS les systÃ¨mes sont maintenant parfaitement intÃ©grÃ©s et cohÃ©rents !</strong></p>
    </div>

    <div class="info">
        <h2>ğŸ“‹ Fichiers ModifiÃ©s</h2>
        <ul>
            <li><code>templates/sheets/heros-sheet.html</code> - Boutons Safe/Unsafe et correction des rangs</li>
            <li><code>styles/heros-sheet.css</code> - Styles pour les nouveaux boutons</li>
            <li><code>scripts/heros-sheet.js</code> - Logique d'attaque avec modes et coups critiques</li>
        </ul>
    </div>
</body>
</html>
